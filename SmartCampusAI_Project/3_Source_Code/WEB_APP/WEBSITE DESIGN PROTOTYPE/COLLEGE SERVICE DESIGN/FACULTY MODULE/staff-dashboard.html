<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Staff Dashboard</title>
    <style>
        /* Base Styling - Modern, roomy layout */
        :root {
            --primary-color: #004d99;
            --secondary-color: #f7f7f7;
            --accent-color: #ffaa00;
            --text-color: #333;
            --card-bg: #ffffff;
            --radius: 12px;
            --shadow-soft: 0 6px 18px rgba(0,0,0,0.08);
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            background: var(--secondary-color);
            display: flex;
            min-height: 100vh;
            color: var(--text-color);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Sidebar - static left column */
        #sidebar {
            width: 240px;
            background: var(--primary-color);
            color: #fff;
            flex-shrink: 0;
            overflow-y: auto;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            padding-bottom: 30px;
            box-shadow: 4px 0 18px rgba(0,0,0,0.12);
        }
        #sidebar .logo { padding: 18px 16px; }
        .logo-title { font-weight: 800; font-size: 1.05rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .logo-icon { margin-right: 10px; display: inline-flex; align-items:center; }

        .nav-item { display:flex; align-items:center; padding:12px 16px; color: rgba(255,255,255,0.9); text-decoration:none; transition: background 160ms, padding-left 160ms; }
        .nav-item svg { width:20px;height:20px; margin-right:12px; flex-shrink:0; }
        .nav-item span { display:inline-block; }
    /* collapsed state removed for static sidebar */
        .nav-item:hover { background: rgba(255,255,255,0.06); }
        .nav-item.active { background: rgba(255,255,255,0.08); font-weight:600; border-left: 3px solid var(--accent-color); }

    /* sidebar toggle removed */

    /* Main content - reserve space for fixed sidebar */
    #main-content { margin-left: 260px; flex:1; padding:28px 32px; max-width: 1600px; width:calc(100% - 260px); }
        header { display:flex; justify-content:space-between; align-items:center; gap:20px; margin-bottom:22px; }
        .welcome h1 { margin:0; font-size:1.8rem; color:var(--primary-color); }
        .welcome p { margin:6px 0 0; color:#666; font-size:0.95rem; }

        /* Notification */
        .notification-bar { display:flex; justify-content:space-between; align-items:flex-start; gap:12px; background:#fff8e1; padding:14px 16px; border-left:6px solid var(--accent-color); border-radius:10px; box-shadow:var(--shadow-soft); color:#7a5a00; }
        .notification-bar .close-btn { background:none; border:none; font-size:20px; color:inherit; cursor:pointer; }

        /* Stats */
        .stat-group { display:flex; gap:18px; margin:20px 0 26px; flex-wrap:wrap; }
        .stat-card { display:flex; gap:12px; align-items:center; padding:16px; border-radius:var(--radius); background:var(--card-bg); box-shadow:0 3px 8px rgba(0,0,0,0.04); border:1px solid #f0f0f2; flex: 1 1 220px; min-width:220px; }
        .stat-content h4 { margin:0; font-size:0.9rem; color:#777; }
        .stat-content p { margin:0; font-size:1.6rem; font-weight:700; color:var(--primary-color); }

        /* Grid of widgets */
        #widget-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:22px; align-items:start; }
        .widget-card { background:var(--card-bg); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow-soft); border:1px solid #ececec; display:flex; flex-direction:column; min-height:120px; }
        .widget-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
        .widget-header h3 { margin:0; font-size:1.05rem; color:var(--primary-color); }

        /* Make the performance widget span 2 columns on wide screens */
        @media (min-width: 1100px) {
            #widget-performance { grid-column: span 2; }
        }

        /* Task list */
        .task-list { list-style:none; padding:0; margin:0; }
        .task-item { display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-bottom:1px dashed #f2f2f2; }
        .task-item button { padding:6px 10px; border-radius:6px; border:none; cursor:pointer; color:#fff; background:var(--primary-color); }

        /* Communication / message summaries */
        .message-summary { padding:8px 0; border-bottom:1px dashed #f4f4f4; }

        /* Customization panel (off-canvas) */
        #customization-panel { position:fixed; right:-420px; top:84px; width:360px; background:#fff; padding:18px; border-radius:12px; box-shadow:0 18px 40px rgba(0,0,0,0.12); transition:right 280ms ease; z-index:600; }
        #customization-panel.open { right:24px; }
        #customization-panel .close-btn { background:none; border:none; cursor:pointer; }

        /* Floating customization button */
        #customize-btn { position:fixed; bottom:24px; right:24px; border-radius:999px; padding:12px 16px; box-shadow:0 10px 30px rgba(0,0,0,0.18); border:none; cursor:pointer; }

        /* Small utilities for markup cleaned from inline styles */
        .hidden-on-load { display: none; }
        .course-row .text-sm { margin:5px 0 0; }
        .custom-panel-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
        .custom-panel-intro { margin-bottom:15px; }

    /* Button utilities */
    .btn { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:8px; border:none; cursor:pointer; font-weight:600; }
    .btn-primary { background:var(--primary-color); color:#fff; }
    .btn-ghost { background:transparent; color:var(--primary-color); border:1px solid transparent; }
    .btn-accent { background:var(--accent-color); color:#fff; }
    .btn-neutral { background:#f5f7fa; color:#333; }
    .muted { color:#666; }
    .time-primary { color: var(--primary-color); font-weight:700; }
    .time-muted { color: #555; font-weight:700; }
    .time-danger { color: #dc3545; font-weight:700; }

        /* Mobile adjustments */
        .mobile-menu-btn { display:none; }
        @media (max-width: 1024px) {
            #sidebar { position:fixed; left:-250px; top:0; height:100vh; }
            /* mobile-open state removed for static sidebar */
            #main-content { padding:18px; }
            .mobile-menu-btn { display:inline-flex; background:var(--primary-color); color:#fff; border-radius:8px; padding:8px; border:none; align-items:center; }
            #widget-grid { grid-template-columns: 1fr; }
        }

    /* stat alternate */
    .stat-card.stat-alt { background:#f7f3ff; }
    .stat-icon.stat-icon-alt { background:#e2d9ff; border-radius:8px; padding:6px; display:inline-flex; align-items:center; justify-content:center; }

    /* placeholder chart */
    .placeholder-chart { color:#666; }
        .placeholder-chart { height:120px; margin-top:15px; display:flex; align-items:center; justify-content:center; font-size:0.9rem; background:#f0f0f0; border-radius:8px; }
        .btn-small { font-size:0.95rem; padding:6px 10px; }
        .upcoming-label { font-size:0.95rem; margin-bottom:12px; font-weight:600; color:#555; }
        .task-list.top-border { border-top:1px dashed #eee; padding-top:6px; }
        .message-summary:first-child { padding-top:0; }
        .message-summary.no-border { border-bottom: none; }
        .request-link { color:var(--accent-color); text-decoration:none; font-weight:600; }
        .leave-balance { font-weight:600; margin:0 0 8px; }
        .leave-balance .days { color:#28a745; font-size:1.1rem; }
        .weekly-att-title { font-weight:600; margin:0 0 5px; }
    .course-row .text-sm { margin: 5px 0 0; }
    .pending-approval { margin-bottom: 10px; }
    .leave-footer { border-top:1px dashed #eee; padding-top:10px; margin-top:10px; }
    .leave-footer p { margin:0; color:#28a745; font-weight:600; }

        /* small utilities */
        .score-number { margin:0; font-weight:700; color:#28a745; font-size:1.1rem; }
        .inbox-badge { color:#007bff; font-weight:700; }
        .urgent-badge { color:#dc3545; font-weight:700; }

    a.link-inline { color:#007bff; text-decoration:none; }
    .badge-urgent { color:#dc3545; font-weight:700; }
        .icon-inline { vertical-align: middle; display:inline-block; }

    </style>
</head>
<body>

    <!-- Sidebar / Navigation (Collapsible) -->
    <nav id="sidebar">
        <!-- Static sidebar (no toggle) -->

        <div class="logo">
            <!-- Icon changed to a more professional academic look -->
            <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 3L1 9l11 6 11-6-11-6zm0 14.88L3.3 12.31l-.9.49 9.6 5.24 9.6-5.24-.9-.49L12 17.88z"/>
            </svg>
            <span class="logo-title">Staff Portal</span>
        </div>

        <a class="nav-item active" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            <span>Dashboard</span>
        </a>
        <a class="nav-item" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <span>Profile</span>
        </a>
        <a class="nav-item" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3.1c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zm-1 15.3c-2.18-.74-3.79-2.73-3.79-5s1.61-4.26 3.79-5V5.5c0-.28-.22-.5-.5-.5s-.5.22-.5.5v2.89c-.58.37-1.12.82-1.6 1.35C8.92 9.21 8.5 9.87 8.5 10.63c0 .87.3 1.69.83 2.37l.08.11c.14.18.29.35.45.51l.17.16c.33.32.69.61 1.05.85.2.14.4.27.6.39l.23.13c.27.16.56.29.86.41.34.14.7.25 1.07.32.4.08.8.12 1.21.12.28 0 .5-.22.5-.5s-.22-.5-.5-.5c-.34 0-.68-.03-1.01-.1-.34-.1-.66-.23-.97-.37-.25-.11-.5-.24-.73-.39-.31-.19-.61-.41-.88-.66l-.15-.14c-.15-.14-.3-.29-.44-.44l-.06-.09c-.44-.56-.71-1.25-.71-2.02 0-.68.21-1.32.58-1.87.4-.6 1.04-1.07 1.74-1.33V5.5c0-.28-.22-.5-.5-.5s-.5.22-.5.5v5.82c-2.18.74-3.79 2.73-3.79 5s1.61 4.26 3.79 5V18.4c.28 0 .5.22.5.5s-.22.5-.5.5zM12 4.1c4.34 0 7.9 3.46 8 7.7.08 3.51-2.26 6.53-5.5 7.63V15.5c0-.28-.22-.5-.5-.5s-.5.22-.5.5v3.93c-3.24-1.1-5.58-4.12-5.5-7.63.1-4.24 3.66-7.7 8-7.7z"/></svg>
            <span>Courses</span>
        </a>
        <a class="nav-item" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 10h-2v4h2v-4zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 18H4V4h16v16zm-8-2h-2v-2H8v2H6v-2H4v-2h2v-2h2v2h2v2h2v-2h2v2h2v2h-2v2h-2v-2h-2v2zm-2-4H8v-2h2v2zm4 0h-2v-2h2v2z"/></svg>
            <span>Students</span>
        </a>
        <a class="nav-item" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.5 13H11V9h1.5v6zm.5-9H11V6h2v2z"/></svg>
            <span>Messaging</span>
        </a>
        <a class="nav-item" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 8H6c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zm-1 5H7v-2h10v2z"/></svg>
            <span>Leave</span>
        </a>
        <a class="nav-item" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1zm0-15c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.48 9-10S17.52 2 12 2zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>
            <span>Resources</span>
        </a>
    </nav>

    <!-- Main Content Area -->
    <div id="main-content">
        <header>
            <div class="welcome">
                <h1>Welcome Back, Dr. Johnson</h1>
                <p>Tuesday, October 5, 2025 | Current Semester: Fall 2025</p>
            </div>
            <button class="mobile-menu-btn btn btn-primary hidden-on-load" onclick="toggleSidebar()">
                <!-- Icon for mobile menu -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
            </button>
        </header>

        <!-- 1. Alerts/Notifications -->
        <div id="notification-area">
            <div class="notification-bar" id="alert-1">
                <p>
                    <strong>ACTION REQUIRED:</strong> 15 Grade Submissions are pending for CS 301. Deadline tomorrow.
                </p>
                <button class="close-btn btn btn-ghost" onclick="document.getElementById('alert-1').style.display='none';">&times;</button>
            </div>
        </div>

        <!-- Overview Cards (Always Visible at the Top) -->
        <div class="stat-group">
            <div class="stat-card stat-pending">
                <div class="stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13zm0 4v2h-2v-2h2zm0 4v2h-2v-2h2zm-3-2H8v-2h2v2zm0-4H8v-2h2v2z"/></svg>
                </div>
                <div class="stat-content">
                    <h4>Pending Tasks</h4>
                    <p>4</p>
                </div>
            </div>

            <div class="stat-card stat-schedule">
                <div class="stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 17H5V9h14v11zm0-12H5V5h14v3zm-7 5h5v5h-5z"/></svg>
                </div>
                <div class="stat-content">
                    <h4>Today's Meetings</h4>
                    <p>2</p>
                </div>
            </div>

            <div class="stat-card stat-grade">
                <div class="stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-.92-12l3.43 3.43-1.06 1.06-2.37-2.37-1.4 1.4L9.1 11.08 7.33 13.5l1.06 1.06L12 11.75l3.43 3.43 1.06-1.06-4.5-4.5z"/></svg>
                </div>
                <div class="stat-content">
                    <h4>Avg. Grade Turnaround</h4>
                    <p>48h</p>
                </div>
            </div>
             <!-- Adding a 4th Stat Card for better desktop layout balance -->
            <div class="stat-card stat-schedule stat-alt">
                <div class="stat-icon stat-icon-alt">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="#673ab7"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.5 13H11v-4h1.5v4zm0-6H11V6h2v3z"/></svg>
                </div>
                <div class="stat-content">
                    <h4>Unread Messages</h4>
                    <p>2</p>
                </div>
            </div>
        </div>

        <!-- Widget Grid -->
        <div id="widget-grid">
            
            <!-- 2. Performance Analytics -->
            <div class="widget-card" id="widget-performance" data-name="Performance Analytics">
                <div class="widget-header">
                    <h3>Performance Analytics</h3>
                    <span class="text-sm muted">Last 30 Days</span>
                </div>
                <div class="widget-content">
                    <p class="score-number">Overall Teaching Score: 4.6/5.0</p>
                    <div class="placeholder-chart">
                        [Placeholder for Student Engagement / Grading Speed Chart]
                    </div>
                </div>
            </div>

            <!-- 3. My Schedule (Calendar/Appointments) -->
            <div class="widget-card" id="widget-schedule" data-name="My Schedule">
                <div class="widget-header">
                    <h3>My Schedule (This Week)</h3>
                    <button class="btn btn-ghost btn-small">Full Calendar &rarr;</button>
                </div>
                <div class="widget-content calendar-view">
                    <div class="upcoming-label muted">Upcoming Appointments:</div>
                    <ul class="task-list top-border">
                        <li class="task-item">
                            <span>CS 301 Lecture</span>
                            <span class="text-sm time-primary">10:00 AM</span>
                        </li>
                        <li class="task-item">
                            <span>Student Advising (Jane Doe)</span>
                            <span class="text-sm time-muted">1:30 PM</span>
                        </li>
                        <li class="task-item">
                            <span>Faculty Meeting</span>
                            <span class="text-sm time-danger">3:00 PM</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 4. Task Manager (To-do) -->
            <div class="widget-card" id="widget-tasks" data-name="Task Manager">
                <div class="widget-header">
                    <h3>Task Manager</h3>
                    <span class="text-sm urgent-badge">4 Urgent</span>
                </div>
                <div class="widget-content">
                    <ul class="task-list">
                        <li class="task-item">
                            <span>Grade CS 301 Homework 2</span>
                            <button class="btn btn-neutral">Action</button>
                        </li>
                        <li class="task-item">
                            <span>Review Leave Request: Smith, J.</span>
                            <button class="btn btn-primary">Approve</button>
                        </li>
                        <li class="task-item">
                            <span>Update EE 405 Attendance (Mon)</span>
                            <button class="btn btn-neutral">Update</button>
                        </li>
                        <li class="task-item">
                            <span>Finalize Syllabus for Spring</span>
                            <button class="btn btn-neutral">Complete</button>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 5. Communications Hub -->
            <div class="widget-card" id="widget-communications" data-name="Communications Hub">
                <div class="widget-header">
                    <h3>Communications Hub</h3>
                    <button class="btn btn-accent">+ New Message</button>
                </div>
                <div class="widget-content">
                    <div class="message-summary">
                        <strong>New Message:</strong> Student Advisor (Re: Jane's progress)
                    </div>
                    <div class="message-summary">
                        <strong>Announcement:</strong> System Update (Library access change)
                    </div>
                    <div class="message-summary no-border">
                        <span class="inbox-badge">Inbox:</span> 2 Unread messages
                    </div>
                </div>
            </div>
            
            <!-- 6. Student Summary & Management -->
            <div class="widget-card" id="widget-students" data-name="Student Overview">
                <div class="widget-header">
                    <h3>Assigned Advisees</h3>
                    <span class="text-sm muted">Total: 12</span>
                </div>
                <div class="widget-content text-sm">
                    <ul class="task-list">
                        <li class="task-item">
                            <span>Jane Doe (CS, Y3)</span>
                            <button class="btn btn-primary">View Profile</button>
                        </li>
                        <li class="task-item">
                            <span>Mark Chen (EE, Y4)</span>
                            <span class="badge-urgent">Alert: 2 Fails</span>
                        </li>
                        <li class="task-item">
                            <span>Lisa Ray (CS, Y2)</span>
                            <button class="btn btn-primary">View Profile</button>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 7. Course Management Shortcuts -->
            <div class="widget-card" id="widget-courses" data-name="Course Shortcuts">
                <div class="widget-header">
                    <h3>Course Management</h3>
                    <span class="text-sm muted">3 Active Courses</span>
                </div>
                <div class="widget-content">
                    <div class="course-row">
                        <strong class="course-title">CS 301: Algorithms</strong>
                        <p class="text-sm">
                            <a href="#" class="link-inline">Materials</a> |
                            <a href="#" class="link-inline">Assignments</a> |
                            <a href="#" class="link-inline">Analytics</a>
                        </p>
                    </div>
                    <div class="course-row">
                        <strong class="course-title">EE 405: Circuits</strong>
                        <p class="text-sm">
                            <a href="#" class="link-inline">Materials</a> |
                            <a href="#" class="link-inline">Assignments</a> |
                            <a href="#" class="link-inline">Analytics</a>
                        </p>
                    </div>
                </div>
            </div>

            <!-- 8. Leave & Attendance -->
            <div class="widget-card" id="widget-leave" data-name="Leave & Attendance">
                <div class="widget-header">
                    <h3>Leave & Attendance</h3>
                    <a href="#" class="request-link">Request Leave</a>
                </div>
                <div class="widget-content">
                    <p class="leave-balance">Remaining Leave Balance: <span class="days">12 Days</span></p>
                    <p class="text-sm pending-approval">Pending Approval: 1 Request</p>
                    <div class="leave-footer">
                        <p class="weekly-att-title">Weekly Attendance:</p>
                        <p class="text-sm">Classes Covered: 10/10 (100%)</p>
                    </div>
                </div>
            </div>
            
        </div>

        <!-- Customization Button -->
        <button id="customize-btn" class="btn btn-accent" onclick="toggleCustomizationPanel()" aria-label="Customize dashboard">
            <svg class="icon-inline" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.09-.73-1.71-.99l-.37-2.65c-.06-.24-.27-.42-.51-.42h-4c-.25 0-.45.18-.51.42l-.37 2.65c-.62.26-1.19.6-1.71.99l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.12.22-.07.49.12.64l2.11 1.65c-.04.32-.07.64-.07.98 0 .34.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.31.61.22l2.49-1c.52.39 1.09.73 1.71.99l.37 2.65c.06.24.27.42.51.42h4c.25 0 .45-.18.51-.42l.37-2.65c.62-.26 1.19-.6 1.71-.99l2.49 1c.22.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></svg>
        </button>
    </div>
    
    <!-- Customization Panel -->
        <div id="customization-panel">
        <div class="custom-panel-header">
            <h3>Customize Dashboard</h3>
            <button class="close-btn" onclick="toggleCustomizationPanel()">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
            </button>
        </div>
        
    <p class="text-sm muted custom-panel-intro">Toggle visibility of your dashboard widgets.</p>

        <div id="widget-toggle-list">
            <!-- Widget toggles will be inserted here by JavaScript -->
        </div>
    </div>

    <script>
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('main-content');
        // Removed collapseIcon as the logic is simplified
        const customizationPanel = document.getElementById('customization-panel');
        const widgetGrid = document.getElementById('widget-grid');
        const widgetToggleList = document.getElementById('widget-toggle-list');
        const widgets = document.querySelectorAll('.widget-card');

        // Initial Widget State (Simulated Personalization)
        let widgetStates = JSON.parse(localStorage.getItem('staffDashboardWidgets')) || [
            { id: 'widget-performance', visible: true, name: 'Performance Analytics' },
            { id: 'widget-schedule', visible: true, name: 'My Schedule' },
            { id: 'widget-tasks', visible: true, name: 'Task Manager' },
            { id: 'widget-communications', visible: true, name: 'Communications Hub' },
            { id: 'widget-students', visible: true, name: 'Student Overview' },
            { id: 'widget-courses', visible: true, name: 'Course Management' },
            { id: 'widget-leave', visible: true, name: 'Leave & Attendance' },
        ];
        
        // Helper function to update widget visibility in the DOM
        function renderWidgets() {
            widgets.forEach(widget => {
                const state = widgetStates.find(s => s.id === widget.id);
                if (state && !state.visible) {
                    widget.style.display = 'none';
                } else {
                    // Use grid display property which can be overridden by grid-column span 2
                    widget.style.display = widget.style.gridColumn ? 'flex' : 'flex';
                }
            });
            // Update "localStorage" (simulating saving preferences)
            localStorage.setItem('staffDashboardWidgets', JSON.stringify(widgetStates));
        }

        // Initialize widget toggles and apply initial state
        function initWidgetToggles() {
            widgetToggleList.innerHTML = '';
            widgetStates.forEach(state => {
                const item = document.createElement('div');
                item.className = 'widget-toggle-item';
                item.innerHTML = `
                    <span>${state.name}</span>
                    <label class="switch">
                        <input type="checkbox" id="toggle-${state.id}" ${state.visible ? 'checked' : ''}>
                        <span class="slider round"></span>
                    </label>
                `;
                widgetToggleList.appendChild(item);

                // Attach change listener to the checkbox
                document.getElementById(`toggle-${state.id}`).addEventListener('change', (e) => {
                    const index = widgetStates.findIndex(s => s.id === state.id);
                    if (index !== -1) {
                        widgetStates[index].visible = e.target.checked;
                        renderWidgets();
                    }
                });
            });

            // Add simple toggle switch CSS dynamically
            const style = document.createElement('style');
            style.textContent = `
                /* Simple CSS for Toggle Switch */
                .switch {
                    position: relative;
                    display: inline-block;
                    width: 40px;
                    height: 24px;
                }
                .switch input { 
                    opacity: 0;
                    width: 0;
                    height: 0;
                }
                .slider {
                    position: absolute;
                    cursor: pointer;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background-color: #ccc;
                    transition: .4s;
                }
                .slider:before {
                    position: absolute;
                    content: "";
                    height: 16px;
                    width: 16px;
                    left: 4px;
                    bottom: 4px;
                    background-color: white;
                    transition: .4s;
                }
                input:checked + .slider {
                    background-color: var(--primary-color);
                }
                input:checked + .slider:before {
                    transform: translateX(16px);
                }
                .slider.round {
                    border-radius: 24px;
                }
                .slider.round:before {
                    border-radius: 50%;
                }
            `;
            document.head.appendChild(style);
        }

        // Sidebar is static now; toggleSidebar remains as a safe no-op for any remaining handlers
        function toggleSidebar() {
            // intentionally empty — sidebar is always visible in this layout
        }

        // Function to toggle the customization panel
        function toggleCustomizationPanel() {
            customizationPanel.classList.toggle('open');
        }

        // Initial setup on load
        window.onload = function() {
            // Apply initial widget visibility
            renderWidgets();
            // Populate the customization panel
            initWidgetToggles();

            // No sidebar collapse behavior required for static layout
        };

        // Simple responsiveness logic for mobile menu button
        window.addEventListener('resize', () => {
            const mobileBtn = document.querySelector('.mobile-menu-btn');
            if (window.innerWidth <= 600) {
                mobileBtn.style.display = 'block';
            } else {
                mobileBtn.style.display = 'none';
            }
        });

    </script>
</body>
</html>
